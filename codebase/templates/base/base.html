{% load cache i18n static %}
{% get_current_language as LANGUAGE_CODE %}
{% firstof page_title object.title website.default_page_title as title %}
{% firstof page_keywords object.keywords website.default_page_keywords as keywords %}
{% firstof page_description object.description website.default_page_description as description %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}"
      dir="ltr"
      x-data="{'theme_light' : $persist(true)}"
      x-bind:data-theme="theme_light ? 'light' : 'dark' ">
  <head>
    <title> {{ title }} </title>
    <!-- favicon -->
    <link rel="shortcut icon" href="{% url 'favicon' %}" />
    <link rel="apple-touch-icon" href="{% url 'favicon' %}" />
    <!-- meta tags -->
    <meta charset="utf-8" />
    <meta name="ROBOTS" content="all" />
    <meta name="REVISIT-AFTER" content="7 days" />
    <meta name="KEYWORDS" content="{{ keywords }}" />
    <meta name="DESCRIPTION" content="{{ description }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- mobile related meta tags -->
    <meta name="application-name" content="{{ title }}" />
    <meta name="apple-mobile-web-app-title" content="{{ title }}" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- OG meta tags-->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="{{ title }}" />
    <meta property="og:image"
          content="{{ request.scheme }}://{{ request.META.HTTP_HOST }}{% url 'favicon' %}" />
    <meta property="og:url" content="{{ request.build_absolute_uri }}" />
    <meta property="og:description" content="{{ description }}" />
    <!-- twitter meta tags -->
    <meta name="twitter:url"
          content="{{ request.scheme }}://{{ request.META.HTTP_HOST }}{% url 'favicon' %}" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{{ title }}" />
    <meta name="twitter:description" content="{{ description }}" />
    <!-- css -->
    {% for css_file in website.css_files %}
      <link href="{% static css_file %}" rel="stylesheet" />
    {% endfor %}
    {% block head_extra %}{% endblock %}
  </head>
  <body class="container">
    <header>
      {% include "base/navbar.html" %}
    </header>
    <section>
      {% include "base/messages.html" %}
    </section>
    <main {% if request.path_info|slice:"0:9" == "/allauth/" %}class="offset-md-3 col-md-6"{% endif %}>
      {% block content %}
      {% endblock content %}
    </main>
    <footer>
      {% include "base/footer.html" %}
    </footer>
    <!-- js -->
    {% for js_file in website.js_files %}
      <script defer src="{% static js_file %}"></script>
    {% endfor %}
    {% block extra_js %}{% endblock %}
  </body>
</html>
